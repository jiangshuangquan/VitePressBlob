# 工程化

具备`模块化`、`组件化`、`规范化`、`自动化`四大特性

## Web 项目

```md
project
├─ dist # 输出目录
│ ├─ prod # 生产环境执行代码
│ └─ test # 测试环境执行代码
├─ src # 源码目录
│ ├─ apis # 接口模块：包括全局接口请求的功能，控制数据定向转换
│ ├─ assets # 资源模块：包括样式、脚本、字体、图像、音频、视频等资源文件
│ ├─ components # 组件模块：包括全局通用的基础组件、皮肤主题和字体图标
│ ├─ layouts # 布局模块：包括以布局为最小粒度的组件集合，由至少一个基础组件组成
│ ├─ flows # 流程模块：包括以流程为最小粒度的组件集合，由至少一个基础组件组成
│ ├─ pages # 页面模块：包括以页面为最小粒度的组件集合，由至少一个基础组件组成
│ ├─ routes # 路由模块：包括全局页面跳转的功能，控制页面自由切换
│ ├─ stores # 数据模块：包括全局数据状态的功能，控制数据驱动视图
│ ├─ views # 视图模块：包括以视图为最小粒度的组件集合，由至少一个基础组件组成
│ ├─ utils # 工具模块：包括全局通用的常量与方法
│ ├─ index.html # 模板入口文件
│ ├─ index.js # 脚本入口文件
│ └─ index.scss # 样式入口文件
└─ package.json
```

## Node 项目

```md
project
├─ dist # 输出目录
│ ├─ prod # 生产环境执行代码
│ └─ test # 测试环境执行代码
├─ src # 源码目录
│ ├─ assets # 资源模块：包括样式、脚本、字体、图像、音频、视频等资源文件
│ ├─ models # 模型模块：包括全局数据模型的功能
│ ├─ routes # 路由模块：包括全局接口请求的功能
│ ├─ utils # 工具模块：包括全局通用的常量与方法
│ └─ index.js # 脚本入口文件
└─ package.json
```

## 组件化

- 将设计图划分为最小组件层级
- 使用预设规范创建组件静态版本
- 确定组件内部最小且完整的状态的表示方式
- 确定组件内部最小且完整的状态的存放方式
- 实现数据流的正向传递与反向传递

## 自动化

常见`自动化`场景包括但不限于`自动化构建`、`自动化测试`、`自动化打包`、`自动化发布`和`自动化部署`，更高级的自动化场景包括但不限于`持续集成`、`持续交付`和`持续部署`

## `CJS`与`ESM`

|    -     |                       CJS                       |                       ESM                       |
| :------: | :---------------------------------------------: | :---------------------------------------------: |
| 语法类型 |                      动态                       |                      静态                       |
| 关键声明 |                     require                     |                export 与 import                 |
| 加载方式 |                   运行时加载                    |                   编译时加载                    |
| 加载行为 |                    同步加载                     |                    异步加载                     |
| 书写位置 |                    任何位置                     |                    顶层位置                     |
| 指针指向 |                this 指向当前模块                |               this 指向 undefined               |
| 执行顺序 |      首次引用时加载模块,再次引用时读取缓存      |      引用时生成只读引用,执行时才是正式取值      |
| 属性引用 | 基本类型属于复制不共享,引用类型属于浅拷贝且共享 |            所有类型属于动态只读引用             |
| 属性改动 |             工作空间可修改引用的值              | 工作空间不可修改引用的值,但可通过引用的方法修改 |
