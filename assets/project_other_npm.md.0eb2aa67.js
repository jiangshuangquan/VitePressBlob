import{_ as s,o as a,c as n,U as o}from"./chunks/framework.aa74df04.js";const l=JSON.parse('{"title":"Npm 镜像","description":"","frontmatter":{},"headers":[],"relativePath":"project/other/npm.md","filePath":"project/other/npm.md","lastUpdated":1689137712000}'),p={name:"project/other/npm.md"},e=[o('<h1 id="npm-镜像" tabindex="-1">Npm 镜像 <a class="header-anchor" href="#npm-镜像" aria-label="Permalink to &quot;Npm 镜像&quot;">​</a></h1><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">registry</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://registry.npmmirror.com/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="管理镜像" tabindex="-1">管理镜像 <a class="header-anchor" href="#管理镜像" aria-label="Permalink to &quot;管理镜像&quot;">​</a></h2><p><code>nrm</code>，它是一个可随时随地自由切换 Npm 镜像的管理工具。打开 CMD 工具，执行<code>npm i -g nrm</code>安装<code>nrm</code>，再执行<code>nrm -V</code>，输出版本表示安装成功。</p><table><thead><tr><th>命令</th><th style="text-align:center;">功能</th></tr></thead><tbody><tr><td><code>nrm add &lt;name&gt; &lt;url&gt;</code></td><td style="text-align:center;">新增镜像</td></tr><tr><td><code>nrm del &lt;name&gt; </code></td><td style="text-align:center;">删除镜像</td></tr><tr><td><code>nrm test &lt;name&gt; </code></td><td style="text-align:center;">测试镜像</td></tr><tr><td><code>nrm use &lt;name&gt; </code></td><td style="text-align:center;">切换镜像</td></tr><tr><td><code>nrm current </code></td><td style="text-align:center;">查看镜像</td></tr><tr><td><code>nrm ls</code></td><td style="text-align:center;">查看镜像列表</td></tr></tbody></table><h2 id="node-gyp" tabindex="-1">node-gyp <a class="header-anchor" href="#node-gyp" aria-label="Permalink to &quot;node-gyp&quot;">​</a></h2><p>安装的<code>Npm</code>模块依赖了<code>C++</code>模块。在安装时会隐式安装<code>node-gyp</code>，<code>node-gyp</code>可编译这些依赖<code>C++</code>模块的<code>Npm</code>模块,<code>node-gyp</code>在首次编译时会依赖<code>Node</code>源码</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>npm config 提供一个参数 disturl，它可设置 Node 镜像地址，当然还是将其指向国内的淘宝镜像。这样又能愉快地安装这些依赖 C++模块的 Npm 模块了</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">disturl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://npm.taobao.org/mirrors/node/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div></div><h2 id="node-sass" tabindex="-1">node-sass <a class="header-anchor" href="#node-sass" aria-label="Permalink to &quot;node-sass&quot;">​</a></h2><p>安装<code>node-sass</code>时，在<code>install</code>阶段会从<code>Github Releases</code>中下载一个叫<code>binding.node</code>的文件，而<code>Github Releases</code>中的文件都托管在<code>s3.amazonaws.com</code>中，该网址又安装不了</p><div class="tip custom-block"><p class="custom-block-title">TIP</p><p>从<code>node-sass</code>的官方文档中可找到一个叫<code>sass_binary_site</code>的参数，它可设置<code>Sass</code>镜像地址，毫无疑问还是将其指向国内的淘宝镜像。这样又能愉快地安装<code>node-sass</code>了。</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sass_binary_site</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://npm.taobao.org/mirrors/node-sass/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><details class="details custom-block"><summary>源码部分</summary><div class="language-js line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">js</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#C792EA;">function</span><span style="color:#A6ACCD;"> </span><span style="color:#82AAFF;">getBinaryUrl</span><span style="color:#89DDFF;">()</span><span style="color:#A6ACCD;"> </span><span style="color:#89DDFF;">{</span></span>\n<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">site</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#82AAFF;">getArgument</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">--sass-binary-site</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">||</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">env</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">SASS_BINARY_SITE</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#A6ACCD;">process</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">env</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">npm_config_sass_binary_site</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">||</span></span>\n<span class="line"><span style="color:#F07178;">    (</span><span style="color:#A6ACCD;">pkg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">nodeSassConfig</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&amp;&amp;</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pkg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">nodeSassConfig</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">binarySite</span><span style="color:#F07178;">) </span><span style="color:#89DDFF;">||</span></span>\n<span class="line"><span style="color:#F07178;">    </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">https://github.com/sass/node-sass/releases/download</span><span style="color:#89DDFF;">&#39;</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">  </span><span style="color:#C792EA;">const</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">=</span><span style="color:#F07178;"> [</span><span style="color:#A6ACCD;">site</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">v</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;"> </span><span style="color:#89DDFF;">+</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">pkg</span><span style="color:#89DDFF;">.</span><span style="color:#A6ACCD;">version</span><span style="color:#89DDFF;">,</span><span style="color:#F07178;"> </span><span style="color:#82AAFF;">getBinaryName</span><span style="color:#F07178;">()]</span><span style="color:#89DDFF;">.</span><span style="color:#82AAFF;">join</span><span style="color:#F07178;">(</span><span style="color:#89DDFF;">&#39;</span><span style="color:#C3E88D;">/</span><span style="color:#89DDFF;">&#39;</span><span style="color:#F07178;">)</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#F07178;">  </span><span style="color:#89DDFF;font-style:italic;">return</span><span style="color:#F07178;"> </span><span style="color:#A6ACCD;">result</span><span style="color:#89DDFF;">;</span></span>\n<span class="line"><span style="color:#89DDFF;">}</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></details></div><div class="warning custom-block"><p class="custom-block-title">WARNING</p><p>执行 npm i 安装依赖前请确保当前的 node-sass 版本与 Node 版本已兼容。</p></div><h2 id="配置镜像地址" tabindex="-1">配置镜像地址 <a class="header-anchor" href="#配置镜像地址" aria-label="Permalink to &quot;配置镜像地址&quot;">​</a></h2><p><code>npm config set &lt;name&gt; &lt;url&gt;</code></p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">electron_mirror</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://npm.taobao.org/mirrors/electron/</span></span>\n<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">phantomjs_cdnurl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://npm.taobao.org/mirrors/phantomjs/</span></span>\n<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">puppeteer_download_host</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://npm.taobao.org/mirrors/</span></span>\n<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">python_mirror</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://npm.taobao.org/mirrors/python/</span></span>\n<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sass_binary_site</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://npm.taobao.org/mirrors/node-sass/</span></span>\n<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sentrycli_cdnurl</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://npm.taobao.org/mirrors/sentry-cli/</span></span>\n<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sharp_binary_host</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://npm.taobao.org/mirrors/sharp/</span></span>\n<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sharp_dist_base_url</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://npm.taobao.org/mirrors/sharp-libvips/</span></span>\n<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sharp_libvips_binary_host</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://npm.taobao.org/mirrors/sharp-libvips/</span></span>\n<span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">config</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">set</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">sqlite3_binary_site</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">https://npm.taobao.org/mirrors/sqlite3/</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h2 id="npm-缓存" tabindex="-1">Npm 缓存 <a class="header-anchor" href="#npm-缓存" aria-label="Permalink to &quot;Npm 缓存&quot;">​</a></h2><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">cache</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">clean</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-f</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div><h2 id="使用-rimraf" tabindex="-1">使用 rimraf <a class="header-anchor" href="#使用-rimraf" aria-label="Permalink to &quot;使用 rimraf&quot;">​</a></h2><p>卸载 node_modules 文件夹</p><div class="language-bash line-numbers-mode"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki material-theme-palenight"><code><span class="line"><span style="color:#FFCB6B;">npm</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">i</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">-g</span><span style="color:#A6ACCD;"> </span><span style="color:#C3E88D;">rimraf</span></span></code></pre><div class="line-numbers-wrapper" aria-hidden="true"><span class="line-number">1</span><br></div></div>',20)];const t=s(p,[["render",function(s,o,l,p,t,r){return a(),n("div",null,e)}]]);export{l as __pageData,t as default};
